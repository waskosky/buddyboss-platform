jQuery(document).ready(function(n){var e=jQuery("body").find(".bbp_topic_tags_dropdown"),o=[];e.length&&e.each(function(e,n){0<jQuery(n).parents(".elementor-location-popup").length||(jQuery(n).select2({dropdownParent:jQuery(n).closest("form").parent(),placeholder:jQuery(n).attr("placeholder"),minimumInputLength:1,closeOnSelect:!0,tags:!0,language:{errorLoading:function(){return bp_select2.i18n.errorLoading},inputTooLong:function(e){e=e.input.length-e.maximum;return bp_select2.i18n.inputTooLong.replace("%%",e)},inputTooShort:function(e){return bp_select2.i18n.inputTooShort.replace("%%",e.minimum-e.input.length)},loadingMore:function(){return bp_select2.i18n.loadingMore},maximumSelected:function(e){return bp_select2.i18n.maximumSelected.replace("%%",e.maximum)},noResults:function(){return bp_select2.i18n.noResults},searching:function(){return bp_select2.i18n.searching},removeAllItems:function(){return bp_select2.i18n.removeAllItems}},dropdownCssClass:"bb-select-dropdown bb-tag-list-dropdown",containerCssClass:"bb-select-container",tokenSeparators:[","],ajax:{url:bbpCommonJsData.ajax_url,dataType:"json",delay:1e3,data:function(e){return jQuery.extend({},e,{_wpnonce:bbpCommonJsData.nonce,action:"search_tags"})},cache:!0,processResults:function(r){return!1===jQuery.isEmptyObject(o)&&jQuery.each(o,function(e,t){for(var o=0;o<r.data.results.length;o++)r.data.results[o].id===t&&r.data.results.splice(o,1)}),{results:r&&r.success?r.data.results:[]}}}}),jQuery(n).on("select2:select",function(e){var t=jQuery(n).closest("form"),o=t.find("#bbp_topic_tags"),r=o.val(),r=r&&0<r.length?r.split(","):[],e=e.params.data;r.push(e.id);r=r.join(",");o.val(r),t.find(".select2-search__field").trigger("click"),t.find(".select2-search__field").trigger("click")}),jQuery(n).on("select2:unselect",function(e){var t=jQuery(n).closest("form"),o=e.params.data;t.find('.bbp_topic_tags_dropdown option[value="'+o.id+'"]').remove();e=t.find(".bbp_topic_tags_dropdown option"),e=jQuery.map(e,function(e){return e.text}),e=(e=jQuery.grep(e,function(e){return e!==o.id})).join(",");t.find("#bbp_topic_tags").val(e),0===e.length&&jQuery(window).scrollTop(jQuery(window).scrollTop()+1)}))}),jQuery("body").on("click",".js-modal-close",function(){e.val(""),e.trigger("change"),jQuery("body").removeClass("popup-modal-reply"),jQuery(".medium-editor-toolbar").removeClass("active medium-editor-toolbar-active"),jQuery("#show-toolbar-button").removeClass("active"),jQuery("medium-editor-action").removeClass("medium-editor-button-active"),jQuery(".medium-editor-toolbar-actions").show(),jQuery(".medium-editor-toolbar-form").removeClass("medium-editor-toolbar-form-active"),jQuery("#whats-new-attachments .bb-url-scrapper-container").remove()});var t=jQuery("body .bbp-topic-reply-link");t.length&&t.click(function(){jQuery("body").addClass("popup-modal-reply"),e.val(""),e.trigger("change")}),"undefined"!=typeof BP_Nouveau&&void 0!==BP_Nouveau.media&&void 0!==BP_Nouveau.media.emoji&&jQuery(".bbp-the-content").length&&void 0!==jQuery.prototype.emojioneArea&&jQuery(".bbp-the-content").each(function(e,t){var o=jQuery(t).attr("id"),r=jQuery(t).data("key");jQuery("#"+o).emojioneArea({standalone:!0,hideSource:!1,container:jQuery("#"+o).closest("form").find("#whats-new-toolbar > .post-emoji"),autocomplete:!1,pickerPosition:"bottom",hidePickerOnBlur:!0,useInternalCDN:!1,events:{ready:function(){void 0!==window.forums_medium_topic_editor&&void 0!==window.forums_medium_topic_editor[r]&&window.forums_medium_topic_editor[r].resetContent(),void 0!==window.forums_medium_reply_editor&&void 0!==window.forums_medium_reply_editor[r]&&window.forums_medium_reply_editor[r].resetContent(),void 0!==window.forums_medium_forum_editor&&void 0!==window.forums_medium_forum_editor[r]&&window.forums_medium_forum_editor[r].resetContent()},emojibtn_click:function(){void 0!==window.forums_medium_topic_editor&&void 0!==window.forums_medium_topic_editor[r]&&window.forums_medium_topic_editor[r].checkContentChanged(),void 0!==window.forums_medium_reply_editor&&void 0!==window.forums_medium_reply_editor[r]&&window.forums_medium_reply_editor[r].checkContentChanged(),void 0!==window.forums_medium_forum_editor&&void 0!==window.forums_medium_forum_editor[r]&&window.forums_medium_forum_editor[r].checkContentChanged(),void 0===window.forums_medium_topic_editor&&n("#bbpress-forums .bbp-the-content").keyup(),jQuery("#"+o)[0].emojioneArea.hidePicker()},search_keypress:function(){var e=this.search.val().toLowerCase();this.search.val(e)},picker_show:function(){n(this.button[0]).closest(".post-emoji").addClass("active")},picker_hide:function(){n(this.button[0]).closest(".post-emoji").removeClass("active")}}})}),window.elementorFrontend&&jQuery(document).on("elementor/popup/show",function(){var e=jQuery("body").find("div.elementor-location-popup").find(".bbp_topic_tags_dropdown");e.length&&(e.select2({placeholder:e.attr("placeholder"),dropdownParent:e.closest("form").parent(),minimumInputLength:1,closeOnSelect:!0,tags:!0,language:{errorLoading:function(){return bp_select2.i18n.errorLoading},inputTooLong:function(e){e=e.input.length-e.maximum;return bp_select2.i18n.inputTooLong.replace("%%",e)},inputTooShort:function(e){return bp_select2.i18n.inputTooShort.replace("%%",e.minimum-e.input.length)},loadingMore:function(){return bp_select2.i18n.loadingMore},maximumSelected:function(e){return bp_select2.i18n.maximumSelected.replace("%%",e.maximum)},noResults:function(){return bp_select2.i18n.noResults},searching:function(){return bp_select2.i18n.searching},removeAllItems:function(){return bp_select2.i18n.removeAllItems}},dropdownCssClass:"bb-select-dropdown bb-tag-list-dropdown",containerCssClass:"bb-select-container",tokenSeparators:[","],ajax:{url:bbpCommonJsData.ajax_url,dataType:"json",delay:1e3,data:function(e){return jQuery.extend({},e,{_wpnonce:bbpCommonJsData.nonce,action:"search_tags"})},cache:!0,processResults:function(r){return!1===jQuery.isEmptyObject(o)&&jQuery.each(o,function(e,t){for(var o=0;o<r.data.results.length;o++)r.data.results[o].id===t&&r.data.results.splice(o,1)}),{results:r&&r.success?r.data.results:[]}}}}),e.on("select2:select",function(e){e=e.params.data;o.push(e.id);e=o.join(",");jQuery("body #bbp_topic_tags").val(e),jQuery("body .select2-search__field").trigger("click"),jQuery("body .select2-search__field").trigger("click")}),e.on("select2:unselect",function(e){var t=e.params.data,e=(o=jQuery.grep(o,function(e){return e!==t.id})).join(",");jQuery("body #bbp_topic_tags").val(e),0===e.length&&jQuery(window).scrollTop(jQuery(window).scrollTop()+1)}))}),jQuery(document).on("input","#bbp_topic_title",function(e){""!==jQuery(e.currentTarget).val().trim()?jQuery(e.currentTarget).closest("form").addClass("has-title"):jQuery(e.currentTarget).closest("form").removeClass("has-title")}),0!==jQuery("textarea#bbp_topic_content").length&&jQuery("#bbp_topic_content").on("keyup",function(){""!==jQuery("#bbp_topic_content").val().trim()?jQuery(this).closest("form").addClass("has-content"):jQuery(this).closest("form").removeClass("has-content")}),0!==jQuery("textarea#bbp_reply_content").length&&jQuery("#bbp_reply_content").on("keyup",function(){""!==jQuery("#bbp_reply_content").val().trim()?jQuery(this).closest("form").addClass("has-content"):jQuery(this).closest("form").removeClass("has-content")}),jQuery(document).on("input",".bbp_editor_topic_content",function(e){e=jQuery(e.currentTarget)[0];""===e.innerHTML.replace(/<p>/gi,"").replace(/<\/p>/gi,"").replace(/<br>/gi,"")&&(e.innerHTML="",jQuery("#bbp_topic_content").val(""))}),jQuery(document).on("input",".bbp_editor_reply_content",function(e){e=jQuery(e.currentTarget)[0];""===e.innerHTML.replace(/<p>/gi,"").replace(/<\/p>/gi,"").replace(/<br>/gi,"")&&(e.innerHTML="",jQuery("#bbp_reply_content").val(""))})});